{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Resultados del OCR</title>
  <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
  <div class="container">
    <h1>Resultados del OCR</h1>

    {% if resultados %}
      {% for r in resultados %}
        <div class="resultado">
          <h3>Archivo: {{ r.filename }}</h3>

          {% if r.rut and r.nem %}
            <p><strong>RUT:</strong> {{ r.rut }}</p>
            <p><strong>NEM:</strong> {{ r.nem|floatformat:2 }}</p>
            <p><strong>Notas:</strong> {{ r.grades|join:", " }}</p>
          {% else %}
            <p class="error">No se pudo extraer información.</p>
          {% endif %}

          {% if r.full_text %}
            <details>
              <summary>Ver texto OCR crudo</summary>
              <pre>{{ r.full_text }}</pre>
            </details>
          {% endif %}
        </div>
      {% endfor %}
    {% else %}
      <p class="empty">No se procesaron archivos.</p>
    {% endif %}

    <a class="btn volver" href="{% url 'upload_pdf' %}">Subir más archivos</a>
  </div>
</body>
</html>
